<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{ title }}</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
<div class="container">
<a class="navbar-brand" href="/">CaravanShare ğŸš</a>
<div class="collapse navbar-collapse">
<ul class="navbar-nav ms-auto">
<li class="nav-item">
<a class="nav-link" href="{{ url_for('logout') }}">ë¡œê·¸ì•„ì›ƒ</a>
</li>
</ul>
</div>
</div>
</nav>

<div class="container mt-5">
<h1>í™˜ì˜í•©ë‹ˆë‹¤, {{ user.name }}ë‹˜!</h1>
<p class="lead">CaravanShare ëŒ€ì‹œë³´ë“œì…ë‹ˆë‹¤. í˜„ì¬ ì—­í• : **{{ user.user_role.value|upper }}**</p>

        {# ğŸš¨ [ì”ì•¡ í‘œì‹œ ë° ì¶©ì „ í¼ ì‚½ì… ì‹œì‘] #}
        {% if user.user_role.value == 'guest' %}
            <p class="h5 text-primary mb-3">
                í˜„ì¬ ì”ì•¡: 
                <strong>â‚©{{ "{:,.0f}".format(user.balance | float) }}</strong>
            </p>

            <div class="card p-3 shadow-sm bg-light mb-4">
                <h6 class="card-subtitle mb-2 text-dark">ì”ì•¡ ì¶©ì „ (ê°€ìƒ)</h6>
                <form method="POST" action="{{ url_for('deposit') }}" class="d-flex">
                    <div class="form-group me-2 flex-grow-1">
                        <input type="number" 
                               name="amount" 
                               class="form-control" 
                               placeholder="ì¶©ì „ ê¸ˆì•¡ (KRW)" 
                               required 
                               min="1" 
                               step="1000">
                    </div>
                    <button type="submit" class="btn btn-primary">ì¶©ì „í•˜ê¸°</button>
                </form>
            </div>
        {% endif %}
        {# [ì”ì•¡ í‘œì‹œ ë° ì¶©ì „ í¼ ì‚½ì… ë] #}

<hr>

{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
{% for category, message in messages %}
<div class="alert alert-{{ category }}">{{ message }}</div>
{% endfor %}
{% endif %}
{% endwith %}

<div class="row">
<div class="col-md-4">
<div class="card">
<div class="card-header">
ë©”ë‰´
</div>
<ul class="list-group list-group-flush">
<li class="list-group-item">
<a href="/caravans/search">â­ ì¹´ë¼ë°˜ ê²€ìƒ‰í•˜ê¸°</a>
</li>

{% if user.user_role.value == 'host' %}
<li class="list-group-item">
<a href="/caravans/new">â• ìƒˆ ì¹´ë¼ë°˜ ë“±ë¡</a>
</li>
<li class="list-group-item">
<a href="{{ url_for('reservations_host') }}">ğŸ”‘ ì˜ˆì•½ ê´€ë¦¬ (í˜¸ìŠ¤íŠ¸)</a>
</li>
                            {# ğŸš¨ [ì¶”ê°€] ê´€ë¦¬ì ì”ì•¡ ì¶©ì „ ë§í¬ #}
                            <li class="list-group-item">
                                <a href="{{ url_for('admin_deposit') }}">ğŸ’¸ ê²ŒìŠ¤íŠ¸ ì”ì•¡ ì¶©ì „</a>
                            </li>
{% endif %}

<li class="list-group-item">
<a href="/reservations/my">ğŸ“ƒ ë‚´ ì˜ˆì•½ í˜„í™© (ê²ŒìŠ¤íŠ¸)</a>
</li>
<li class="list-group-item">
<a href="/users/profile">ğŸ‘¤ í”„ë¡œí•„ ìˆ˜ì •</a>
</li>

<li class="list-group-item">
<a href="{{ url_for('logout') }}" class="text-danger">ğŸšª ë¡œê·¸ì•„ì›ƒ</a>
</li>
</ul>
</div>
</div>

<div class="col-md-8">
<div class="card">
<div class="card-header">
ìµœê·¼ í™œë™
</div>
<div class="card-body">
<p>ì—¬ê¸°ì— ìµœê·¼ ì˜ˆì•½, ë©”ì‹œì§€, ì•Œë¦¼ ë“±ì˜ í™œë™ ë‚´ìš©ì´ í‘œì‹œë©ë‹ˆë‹¤.</p>
{% if user.user_role.value == 'host' %}
<p class="text-info">í˜„ì¬ í˜¸ìŠ¤íŠ¸ ì—­í• ì´ë¯€ë¡œ, ë“±ë¡ëœ ì¹´ë¼ë°˜ ê´€ë¦¬ì— ì§‘ì¤‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
{% else %}
<p class="text-info">í˜„ì¬ ê²ŒìŠ¤íŠ¸ ì—­í• ì´ë¯€ë¡œ, ì—¬í–‰í•  ì¹´ë¼ë°˜ì„ ì°¾ì•„ë³´ì„¸ìš”!</p>
{% endif %}
</div>
</div>
</div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>